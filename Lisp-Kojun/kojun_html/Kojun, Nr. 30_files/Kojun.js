function Kojun(){var b=this;b.constructor();b.scriptVersion="003";b.uis.puzzle=["Cojun","Kojun"];var h=b.board.c,c=b.alist,n=0,p=0,l=0,k=0;b.cell.values=[nil,1,2,3,4,5,6,7,8,9];b.cell.keys=[["0",nil],["x",nil],[",",nil],["-",nil],["/",nil]];b.enable.vmarkers=!0;b.enable.tracking=!0;b.keypadValues=b.keypad.numbers;b.cell.min=1;b.cell.max=9;b.init=function(){Object.getPrototypeOf(b).init.call(b)};b.reset2=function(){try{n=b.labels.west;p=b.labels.north;l=b.size.x-b.labels.east;k=b.size.y-b.labels.south;
if(b.level.problem){var a=0;var e=b.level.problem.replace(/\s+/g," ").trim().split(" ");for(var g=p;g<k;g++)for(var d=n;d<l;d++){var f=h[d][g];var c=e[a++];"."==c||"-"==c?f.value=nil:(f.value=parseInt(c),f.fixed=!0)}}if(b.level.solution)for(a=0,e=b.level.solution.replace(/\s+/g," ").trim().split(" "),g=p;g<k;g++)for(d=n;d<l;d++)f=h[d][g],c=e[a++],f.solution="."==c||"-"==c?nil:parseInt(c)}catch(m){throw b.exception(m),m;}};b.check2=function(){try{for(var a=1;a<c.length;a++)for(var e=[],g=0;g<c[a].length;g++){var d=
c[a][g];d.value==nil?d.error=1:d.value>c[a].length?d.error=2:e[d.value]?d.error=e[d.value].error=5:e[d.value]=d}for(a=0;a<l;a++)for(var f=0;f<k;f++)d=h[a][f],a<l-1&&d.value==h[a+1][f].value&&(d.error=h[a+1][f].error=4),f<k-1&&d.value==h[a][f+1].value&&(d.error=h[a][f+1].error=4);for(a=0;a<l;a++)for(f=0;f<k;f++)d=h[a][f],f<k-1&&d.areas==h[a][f+1].areas&&d.value<=h[a][f+1].value&&(d.error=h[a][f+1].error=3)}catch(q){throw b.exception(q),q;}};b.solve2=function(){try{for(var a=1;a<c.length;a++)1==c[a].length?
c[a][0].value=1:2==c[a].length&&c[a][0].x==c[a][1].x&&(c[a][0].y<c[a][1].y?(c[a][0].value=2,c[a][1].value=1):(c[a][0].value=1,c[a][1].value=2))}catch(e){throw b.exception(e),e;}};b.initValueMarkers2=function(){try{for(var a=1;a<c.length;a++)for(var e=0;e<c[a].length;e++){var g=c[a][e];if(g.value==nil)for(var d=1;d<=c[a].length;d++)g.markers.set(b.marker.numberBase+d)}b.updateValueMarkers2()}catch(f){throw b.exception(f),f;}};b.updateValueMarkers2=function(){try{for(var a=0;a<l;a++)for(var e=0;e<k;e++){var g=
h[a][e],d=b.marker.numberBase;if(g.value!=nil){for(var f=0;f<l;f++)for(var c=0;c<k;c++)g.areas==h[f][c].areas&&h[f][c].markers.clear(d+g.value);0<a&&h[a-1][e].markers.clear(d+g.value);0<e&&h[a][e-1].markers.clear(d+g.value);a<l-1&&h[a+1][e].markers.clear(d+g.value);e<k-1&&h[a][e+1].markers.clear(d+g.value)}}}catch(m){throw b.exception(m),m;}};b.moveTo2=function(a,e,c){try{b.cell.values=[];for(c=e=n;c<l;c++)for(var d=p;d<k;d++)h[c][d].areas==a.areas&&(b.cell.values[e++]=e);b.cell.values[e]=nil;b.cell.max=
e;b.keypadValues=9<e?b.keypad.numbers:b.keypad.numbers.slice(0,e);b.keypadValues[e]=["\u2612",nil]}catch(f){throw b.exception(f),f;}};b.makeMove2=function(a,c,g){try{b.moveTo2(a,a,!1),Object.getPrototypeOf(this).makeMove2.call(this,a,c,g)}catch(d){throw b.exception(d),d;}};b.paintCell=function(a){try{var c=b.canvas.getContext("2d");c.fillStyle=b.uic.light[a.color];c.fillRect(a.px,a.py,b.unit.x,b.unit.y);b.paintSymbolMarkers(a);b.paintValueMarkers(a);a.value!=nil&&b.paintText(a,a.value,{color:a.fixed?
b.uic.fixed:b.uic.value});a.error&&b.display.errors&&(a.value==nil?b.paintErrorDot(a):b.paintErrorCircle(a))}catch(g){throw b.exception(g),g;}}}Kojun.prototype=new Puzzle;
